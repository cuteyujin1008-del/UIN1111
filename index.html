<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Kakao Share</title>
  <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
  <script>
    Kakao.init("ff9ae14e50059eda1305ea6dc9c4e3cf");

    function isDetailMode() {
      const qs = new URLSearchParams(window.location.search);
      return qs.get("detail") === "1";
    }

    function sendMsg() {
      const qs = new URLSearchParams(window.location.search);
      const msg = qs.get("msg") || "ë©”ì‹œì§€ê°€ ì „ë‹¬ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.";

      const url = new URL(window.location.href);
      url.search = "";
      url.searchParams.set("detail", "1");

      Kakao.Share.sendDefault({
        objectType: "text",
        text: msg,
        link: {
          mobileWebUrl: url.toString(),
          webUrl: url.toString()
        }
      });
    }

    function handleLoad() {
      if (isDetailMode()) {
        // âœ… ìì„¸íˆ ë³´ê¸° í´ë¦­ ì‹œ â†’ PDFë¡œ ì´ë™
        const qs = new URLSearchParams(window.location.search);

        // ğŸ”¥ ì—¬ê¸° PDF ì£¼ì†Œë§Œ ë‚˜ì¤‘ì— ë°”ê¿”ì£¼ë©´ ë¨
        const pdfUrl =
          qs.get("pdf") ||
          "https://example.com/sample.pdf";

        location.replace(pdfUrl);
      } else {
        // âœ… ì²˜ìŒ ì—´ë¦´ ë•ŒëŠ” ì¹´í†¡ ê³µìœ ë§Œ
        sendMsg();
      }
    }
  </script>
</head>
<body onload="handleLoad()">
</body>
</html>
