<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>전표 알림</title>
  <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
</head>

<body>

<script>
  const params = new URLSearchParams(window.location.search);
  const detail = params.get("detail");
  const msg = params.get("msg");

  // ✅ 자세히 보기 눌렀을 때 → PDF 바로 열기
  if (detail === "1") {
    location.replace("/voucher_template.pdf");
  }
</script>

<script>
  // ✅ 최초 진입 시만 카톡 공유
  if (!new URLSearchParams(window.location.search).get("detail")) {
    Kakao.init("ff9ae14e50059eda1305ea6dc9c4e3cf");

    const msg =
      new URLSearchParams(window.location.search).get("msg") ||
      "메시지가 전달되지 않았습니다.";

    const url = new URL(window.location.href);
    url.search = "";
    url.searchParams.set("detail", "1");
    url.searchParams.set("msg", msg);

    Kakao.Share.sendDefault({
      objectType: "text",
      text: msg,
      link: {
        mobileWebUrl: url.toString(),
        webUrl: url.toString()
      }
    });
  }
</script>

</body>
</html>
